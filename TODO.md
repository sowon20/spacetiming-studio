# TODO (스냅샷 기준 백로그)

이 파일은 **이번 방 기준으로 남겨두는 백로그 목록**이고,
새로운 기능 추가보다는 “지금 구조를 안정화/정리”하는 데 초점을 둔다.

---

## 1. 필수 (먼저 끝내기)

1. **이미지 파이프라인 최종 안정 체크**
   - 기준 상태: `UPLOAD_ROOT = "uploads"` (로컬 디스크)
   - 체크 포인트:
     - 폰에서 이미지 첨부 → 말풍선 썸네일 정상 표시
     - Pi에서 `ls uploads/local_default` → 파일 생성 확인
     - 부감독이 이미지 내용에 대해 실제 보이는 걸 말하는지 확인
   - 이상 없으면 이 상태를 “안전 기준점”으로 문서에 박제

2. **RESET 플로우 유지 점검**
   - `RESET_FLOW.md`는 이미 작성 완료
   - 바뀌는 커맨드나 경로가 생기면 여기에만 추가/수정해서 “복구 기준점” 유지

---

## 2. 중요 (안정화 & 사용성 개선)

3. **NAS 사용 전략 확정**
   - 현재 상태: 옵션 A
     - 로컬 `uploads/` 사용
     - 필요할 때 NAS(`/mnt/sowon_cloud/chat_uploads`)로 `rsync` 백업
   - 향후 옵션 B 시도 여지:
     - `UPLOAD_ROOT`를 `/mnt/sowon_cloud/chat_uploads`로 변경
     - NAS 마운트/권한 완전 안정화 후 적용
   - 결정 사항은 `SYSTEM_OVERVIEW.md` / `RESET_FLOW.md`에 반영

4. **iOS 홈앱 레이아웃 버그 해결**
   - 증상:
     - 키보드 등장/사라짐 시 대시보드 y축이 튀는 현상
     - 입력창이 화면 아래로 내려갔다가 올라오는 현상
   - 방향:
     - viewport 변화 이벤트 감지
     - 스크롤 컨테이너 높이/위치 고정 로직 추가

5. **말풍선 메뉴 위치 보정**
   - 증상:
     - 짧은 말풍선을 길게 눌렀을 때 메뉴가 화면 밖으로 잘리는 문제
   - 방향:
     - 말풍선 위치 + 뷰포트 크기 기준으로 메뉴 위치 재계산
     - 화면 상단/하단 근처에서는 위/아래 방향을 바꾸는 식으로 보정

---

## 3. 나중에 (여유 생기면)

6. **Gemini Native / Live 연동 설계**
   - 목표:
     - 음성/통화 인터페이스도 현재 메모리 레이어와 같은 “뇌”를 쓰게 만들기
   - 방향:
     - 텔레그램/포털과 동일한 director 서버를 사용하는지,
       또는 별도의 게이트웨이를 둘지 구조 스케치

7. **이미지·영상·통화에 대한 감상 기록 시스템**
   - 아이디어:
     - 첨부 후, 부감독이 스스로 한 줄 요약/감상을 생성
     - 이를 `memory/*.jsonl`에 기록해서, 이후 대화에서 참고 가능한 “감상 로그”로 사용
   - 구현 포인트:
     - 첨부 처리 후 후처리 훅에서 요약 생성
     - 기억 구조와의 충돌 없이 쌓이는 포맷 정의

---

> 이 TODO는 “갈아엎기용”이 아니라 **지금 구조를 유지한 채 다듬고 안정화하는 체크리스트**로 사용한다.
